(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"S8+r":function(e,t,a){e.exports={titleContainer:"titleContainer___3wPUf",main:"main___23M2d",process:"process___3pMqH",fileUpload:"fileUpload___3iD_6",tips:"tips___2pdFi",stepTitle:"stepTitle___1flIP",stepTips:"stepTips___30gRl",bar:"bar___Z7SxB",number:"number___1bYkL",type:"type___3Rjoa",date:"date___1FLtc",text:"text___6BofY",legend:"legend___2WuLf",numberCir:"numberCir___3zCiU",typeCir:"typeCir___2w_JB",dateCir:"dateCir___2WQtV",textCir:"textCir___3q8x7",symbol:"symbol___2YaPr",comment:"comment___1ZUI6"}},yLM6:function(e,t,a){"use strict";a.r(t);a("IzEo");var s=a("bx4M"),l=(a("sPJy"),a("bE4q")),o=(a("7Kak"),a("9yH6")),n=(a("y8nQ"),a("Vl3Y")),r=a("qIgq"),c=a.n(r),i=a("q1tI"),p=a.n(i),m=a("/MKj"),u=a("Ty5D"),d=(a("3a4m"),a("+L6B"),a("2/Rp")),b=(a("5Dmo"),a("3S7+")),_=(a("5NDa"),a("5rEg")),f=a("p0pE"),S=a.n(f),j=a("S8+r"),g=a.n(j),O=a("LLXN"),E=a("olQp"),y=a("7/+/"),v=a("ygAv"),h=a("V6UL"),F=e=>{var t=e.dispatch,a=e.location,l=e.importFile.pollJobResponse,o=n["a"].useForm(),r=c()(o,1),m=r[0],u=Object(i["useState"])("whole_data"),f=c()(u,2),j=f[0],F=f[1],M=Object(i["useState"])(50),x=c()(M,2),I=x[0],w=x[1],T=Object(i["useState"])(y["StepStatusIcon"]["todo"]),C=c()(T,2),N=C[0],k=C[1],D=Object(i["useState"])(y["StepStatusIcon"]["todo"]),L=c()(D,2),R=L[0],U=L[1],B=Object(i["useState"])(y["StepStatusIcon"]["todo"]),J=c()(B,2),q=J[0],z=J[1],P=Object(i["useState"])(Object(O["formatMessage"])({id:"upload.prepare"})),V=c()(P,2),Y=V[0],Q=V[1],A=Object(i["useState"])(Object(O["formatMessage"])({id:"upload.prepare"})),H=c()(A,2),K=H[0],W=H[1],X=Object(i["useState"])(Object(O["formatMessage"])({id:"upload.prepare"})),Z=c()(X,2),G=Z[0],$=Z[1],ee=Object(i["useState"])(""),te=c()(ee,2),ae=te[0],se=te[1],le=Object(i["useState"])(!0),oe=c()(le,2),ne=oe[0],re=oe[1],ce=Object(i["useState"])(null),ie=c()(ce,2),pe=ie[0],me=ie[1],ue=Object(i["useState"])(!1),de=c()(ue,2),be=de[0],_e=de[1],fe=e=>{me(e),_e(!0)},Se=()=>{_e(!1),me(null)};Object(i["useEffect"])(()=>{if(null!==l&&void 0!==l){var e=l.data,t=Object(v["d"])(e.steps);Object(E["checkoutStepFromStepsDict"])(t,y["ImportStepType"].copy,e=>{if("succeed"===e.status){var t=e["took"],a=e.extension.file_size;k(y["StepStatusIcon"]["done"]),Q("".concat(Object(O["formatMessage"])({id:"upload.hintUploadFile"},{elapsed:t.toFixed(2),fileSize:Object(v["b"])(a)}))),U(y["StepStatusIcon"]["doing"]),W(Object(O["formatMessage"])({id:"upload.loading"}))}else U(y["StepStatusIcon"]["undone"]),Q(Object(O["formatMessage"])({id:"upload.fail"}))}),Object(E["checkoutStepFromStepsDict"])(t,y["ImportStepType"].load,e=>{if("succeed"===e.status){var t=e.extension.n_cols,a=(e.extension.n_cols_used,e.extension.n_rows),s=e.extension.n_rows_used,l=e.took;U(y["StepStatusIcon"]["done"]),W("".concat(Object(O["formatMessage"])({id:"upload.hintLoadData"},{elapsed:l.toFixed(2),nRows:a,nColumns:t,nRowsUsed:s}))),z(y["StepStatusIcon"]["doing"]),$(Object(O["formatMessage"])({id:"upload.analysising"}))}else U(y["StepStatusIcon"]["undone"]),W(Object(O["formatMessage"])({id:"upload.fail"}))}),Object(E["checkoutStepFromStepsDict"])(t,y["ImportStepType"].analyze,e=>{if("succeed"===e.status){var t=e.extension.feature_summary.categorical,a=e.extension.feature_summary.continuous,s=e.extension.feature_summary.datetime,l=e.took;z(y["StepStatusIcon"]["done"]),U(y["StepStatusIcon"]["done"]),$("".concat(Object(O["formatMessage"])({id:"upload.hintAnalysis"},{elapsed:l.toFixed(2),nContinuous:a,nCategorical:t,nDatetime:s})))}else z(y["StepStatusIcon"]["undone"]),$(Object(O["formatMessage"])({id:"import.fail"}))})}},[l]);var je=e=>{isNaN(e)||w(e)},ge=(e,t)=>{var a;return function(){var s=this,l=arguments;a||(a=setTimeout(function(){e.apply(s,l),a=null},t))}},Oe=e=>{null!=e&&e.length>0&&(se(e),t({type:"importFile/testImportFile",payload:{path:e}}))},Ee=(ge(Oe,100),()=>{k(y["StepStatusIcon"]["doing"]);var e="random_rows"===j?{n_rows:m.getFieldsValue().n_rows,percentage:""}:{percentage:I,n_rows:""},s=S()({sample_strategy:j},e,{file_path:ae,source_type:a.query.sourceType,upload_took:10});t({type:"importFile/createTempDataset",payload:s})}),ye=e=>{var t=e.target.value;se(t),null!==t&&void 0!==t&&t.length>0&&Object(h["q"])(t).then(e=>{if(0===e.code)re(!1),Se();else{var t=e.data.message;console.info("hhhhh"),console.info(t),console.info(be),fe(t),re(!0)}})},ve=e=>{};return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:g.a.main},Object(E["makeSampleDiv"])(F,j,m,je,I),p.a.createElement("div",{className:g.a.fileUpload},p.a.createElement("dl",null,p.a.createElement("dt",null,Object(O["formatMessage"])({id:"import.address"}))),p.a.createElement(s["a"],{style:{width:"85%"}},Object(E["makeCsvFileTip"])(),p.a.createElement(b["a"],{trigger:["focus"],title:pe,visible:be,color:"#FFF2F0",placement:"right"},p.a.createElement(_["a"],{style:{width:300},onChange:ye,onBlur:ve,placeholder:"File path in server ",maxLength:256,minLength:0})),p.a.createElement("br",null),p.a.createElement(d["a"],{type:"primary",disabled:ne,style:{marginTop:10},onClick:Ee},Object(O["formatMessage"])({id:"import.analysis"}))))),p.a.createElement("div",{className:g.a.process},p.a.createElement("dl",null,p.a.createElement("dt",null,N,p.a.createElement("span",{className:g.a.stepTitle},"1. ",Object(O["formatMessage"])({id:"import.copy"}))),p.a.createElement("dd",{className:g.a.stepTips},Y)),p.a.createElement("dl",null,p.a.createElement("dt",null,R,p.a.createElement("span",{className:g.a.stepTitle},"2. ",Object(O["formatMessage"])({id:"upload.loadData"}))),p.a.createElement("dd",{className:g.a.stepTips},K)),p.a.createElement("dl",null,p.a.createElement("dt",null,q,p.a.createElement("span",{className:g.a.stepTitle},"3. ",Object(O["formatMessage"])({id:"upload.analysisData"}))),p.a.createElement("dd",{className:g.a.stepTips},G))))},M=Object(u["o"])(Object(m["c"])(e=>{var t=e.importFile;return{importFile:t}})(F)),x=a("X/SJ"),I=a("5ahD"),w=Object(u["o"])(Object(m["c"])(e=>{var t=e.importFile;return{pollJobResponse:t.pollJobResponse}})(E["CreateDatasetFormPage"])),T=e=>{var t=e.importFile.pollJobResponse,a=(e.dispatch,n["a"].useForm()),r=c()(a,1),m=r[0],u=Object(i["useState"])("a"),d=c()(u,2),b=d[0],_=d[1],f=Object(i["useState"])(null),S=c()(f,2),j=(S[0],S[1],Object(i["useState"])(null)),v=c()(j,2),h=v[0],F=v[1],T=Object(i["useState"])(null),C=c()(T,2),N=(C[0],C[1],Object(i["useState"])(!1)),k=c()(N,2),D=k[0],L=k[1],R={a:p.a.createElement(M,null),b:p.a.createElement(x["default"],{datasetName:h}),c:p.a.createElement(I["default"],{datasetNameFromParam:h,isTemporary:!0})};Object(i["useEffect"])(()=>{Object(E["checkoutStepFromResponse"])(t,y["UploadStepType"].analyze,e=>{"succeed"===e.status&&(F(t.data.temporary_dataset_name),L(!0))})},[t]);var U=p.a.createElement(w,null),B=e=>{_(e.target.value)},J=p.a.createElement(o["a"].Group,{onChange:B,defaultValue:b},p.a.createElement(o["a"].Button,{value:"a"},Object(O["formatMessage"])({id:"import.import"})),D&&p.a.createElement(p.a.Fragment,null,p.a.createElement(o["a"].Button,{value:"b"},Object(O["formatMessage"])({id:"extra.preview"})),p.a.createElement(o["a"].Button,{value:"c"},Object(O["formatMessage"])({id:"extra.dataExplore"}))));return p.a.createElement(n["a"],{form:m,initialValues:{n_rows:1e3}},p.a.createElement("div",{className:g.a.breadcrumb},p.a.createElement(l["a"],null,p.a.createElement(l["a"].Item,null,p.a.createElement("a",{href:"/"},Object(O["formatMessage"])({id:"extra.dataset"}))),p.a.createElement(l["a"].Item,null,Object(O["formatMessage"])({id:"extra.new"})),p.a.createElement(l["a"].Item,null,Object(O["formatMessage"])({id:"import.import"})))),p.a.createElement(s["a"],{title:J,extra:U,style:{paddingBottom:60}},R[b]))};t["default"]=Object(u["o"])(Object(m["c"])(e=>{var t=e.importFile,a=e.dataset;return{importFile:t,dataset:a}})(T))}}]);