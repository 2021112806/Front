(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{YMUj:function(e,t,a){"use strict";a.r(t);a("sPJy");var n=a("bE4q"),r=(a("lUTK"),a("BvKs")),l=(a("+L6B"),a("2/Rp")),i=(a("5NDa"),a("5rEg")),o=(a("y8nQ"),a("Vl3Y")),s=a("qIgq"),c=a.n(s),m=(a("B9cy"),a("Ol7k")),d=a("q1tI"),u=a.n(d),p=a("/MKj"),f=a("Ty5D"),b=a("X/SJ"),h=a("5ahD"),g=(a("IzEo"),a("bx4M")),E=(a("14J3"),a("BMrR")),v=(a("giR+"),a("fyUT")),y=(a("jCWc"),a("kPKH")),O=(a("8dk+"),a("eZ87")),j=(a("7Kak"),a("9yH6")),_=a("d6i3"),x=a.n(_),M=a("1l/V"),S=a.n(M),k=(a("OaEy"),a("2fM7")),N=a("LLXN"),T=a("Kvkj"),w=a("YuA9"),C=a("BD01"),L=a.n(C),D=a("V6UL"),P=a("ygAv"),I=a("z6lB"),F=(a("RWK8"),a("7/+/")),R=a("vDqi"),A=a.n(R),z=k["a"].Option,U=[{name:"".concat(Object(N["formatMessage"])({id:"extra.trainUnion"})),count:80,color:"rgba(49, 154, 228, 1)"},{name:"".concat(Object(N["formatMessage"])({id:"extra.verifyUnion"})),count:10,color:"rgba(6, 194, 97, 1)"},{name:"".concat(Object(N["formatMessage"])({id:"extra.testUnion"})),count:10,color:"rgba(225, 67, 68, 1)"}],q=e=>{var t=e.train.labelName,a=e.dispatch,n=e.location.query.datasetName,r=["KNN","MLP","RF","LR","DTR"],s=["mcts","moea","nsgaii","rnsgaii"],m=Object(d["useRef"])(),p=Object(d["useState"])("train_validation_holdout"),f=c()(p,2),b=f[0],h=f[1],_=Object(d["useState"])(null),M=c()(_,2),C=M[0],R=M[1],q=Object(d["useState"])(null),V=c()(q,2),K=V[0],B=V[1],W=Object(d["useState"])(""),H=c()(W,2),J=H[0],Y=H[1],Z=Object(d["useState"])(r[0]),X=c()(Z,2),Q=X[0],G=X[1],$=Object(d["useState"])(s[0]),ee=c()($,2),te=ee[0],ae=ee[1],ne=Object(d["useState"])(t),re=c()(ne,2),le=re[0],ie=re[1],oe=Object(d["useState"])(""),se=c()(oe,2),ce=se[0],me=se[1],de=Object(d["useState"])(""),ue=c()(de,2),pe=ue[0],fe=ue[1],be=Object(d["useState"])("quick"),he=c()(be,2),ge=he[0],Ee=he[1],ve=Object(d["useState"])(5),ye=c()(ve,2),Oe=ye[0],je=ye[1],_e=Object(d["useState"])(20),xe=c()(_e,2),Me=xe[0],Se=xe[1],ke=Object(d["useState"])(9527),Ne=c()(ke,2),Te=Ne[0],we=Ne[1],Ce=Object(d["useState"])(""),Le=c()(Ce,2),De=Le[0],Pe=Le[1],Ie=Object(d["useState"])(null),Fe=c()(Ie,2),Re=Fe[0],Ae=Fe[1],ze=Object(d["useState"])(!1),Ue=c()(ze,2),qe=Ue[0],Ve=Ue[1],Ke=Object(d["useState"])(!1),Be=c()(Ke,2),We=Be[0],He=Be[1],Je=Object(d["useState"])(U),Ye=c()(Je,2),Ze=Ye[0],Xe=Ye[1],Qe=Object(d["useState"])([]),Ge=c()(Qe,2),$e=Ge[0],et=Ge[1],tt=Object(d["useState"])([]),at=c()(tt,2),nt=at[0],rt=at[1],lt=(null===$e||void 0===$e?void 0:$e.filter(e=>"continuous"===e.type||"categorical"===e.type))||[],it=(null===$e||void 0===$e?void 0:$e.filter(e=>"datetime"===e.type))||[],ot=(null===$e||void 0===$e?void 0:$e.filter(e=>{if(e.type===F["FeatureType"].Categorical&&3===e.extension.value_count.length){var t=e.extension.value_count.map(e=>e.type);if(t.indexOf(F["PartitionClass"].Train)>-1&&t.indexOf(F["PartitionClass"].Eval)>-1&&t.indexOf(F["PartitionClass"].Test)>-1)return!0}return!1}))||[],st=ot.length>0,ct=it.length>0,mt=o["a"].useForm(),dt=c()(mt,1),ut=dt[0];Object(d["useEffect"])(()=>{pt()},[]);var pt=function(){var e=S()(x.a.mark(function e(t){var a;return x.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get("/api/model/param",{params:{model_id:t}});case 3:a=e.sent,rt(a.data.data.params),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();console.log("cqm,",nt),Object(d["useEffect"])(()=>{Object(D["g"])(n).then(e=>{if(0===e.code){var t=e.data.features;t.length<=0?Object(I["a"])("Features of  "+n+" is empty"):(t.forEach((e,t)=>{if(e.key=t,"continuous"===e.type)e.hData=[],e.extension.bins.map(t=>{e.hData.push({value:[t.begin,t.end],count:t.value})});else if("datetime"===e.type){var a=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"];e.barHourData=[];var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.barMonthData=[];var r=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];e.barWeekData=[],e.barYearData=[],e.extension.by_hour.forEach((t,n)=>{e.barHourData.push({time:a[n],value:t})}),e.extension.by_month.forEach((t,a)=>{e.barMonthData.push({time:n[a],value:t})}),e.extension.by_week.forEach((t,a)=>{e.barWeekData.push({time:r[a],value:t})}),e.extension.by_year.forEach((t,a)=>{e.barYearData.push({time:String(t["year"]),value:t["value"]})})}}),et(t),Object(D["k"])(n,le).then(e=>{if(0===e.code){var a=e.data;if(ie(a.conf.label_col),me(a.conf.pos_label),Ee(a.conf.train_mode),h(a.conf.partition_strategy),a.conf.partition_strategy===F["PartitionStrategy"].Manual)Ae(a.conf.partition_col);else if(a.conf.partition_strategy===F["PartitionStrategy"].TrainValidationHoldout){U[0].count=a.conf.train_validation_holdout.train_percentage,U[1].count=a.conf.train_validation_holdout.validation_percentage,U[2].count=a.conf.train_validation_holdout.holdout_percentage,Xe(U);var r=a.conf.train_validation_holdout.random_state;void 0!==r&&null!==r&&we(a.conf.train_validation_holdout.random_state)}t.forEach(e=>{e.name===a.conf.label_col&&(B(e.extension.value_count),"continuous"===e.type?R(e.hData):"categorical"===e.type&&R(e.extension.value_count),Y(e.type))}),Object(D["p"])(n,a.conf.label_col).then(e=>{var t=e.data;fe(t.task_type)})}else Object(I["a"])("Response is: "+JSON.stringify(e))}))}else Object(I["a"])("Response is: "+JSON.stringify(e))})},[n,le,t]);var ft=e=>{Ve(!1),ie(e)},bt=e=>{Ae(e)},ht=e=>{isNaN(e)||je(e)},gt=e=>{isNaN(e)||Se(e)},Et=u.a.createElement(u.a.Fragment,null,u.a.createElement(j["a"].Group,{onChange:e=>h(e.target.value),value:b,style:{marginTop:12}},u.a.createElement(j["a"],{value:F["PartitionStrategy"].TrainValidationHoldout},Object(N["formatMessage"])({id:"extra.testAndTrain"})))),vt=()=>{return b===F["PartitionStrategy"].CrossValidation?u.a.createElement(u.a.Fragment,null,u.a.createElement("dl",null,u.a.createElement("dt",null,Object(N["formatMessage"])({id:"train.divisionNum"}))),u.a.createElement(E["a"],null,u.a.createElement(y["a"],{span:12},u.a.createElement(O["a"],{min:2,max:50,onChange:ht,value:"number"===typeof Oe?Oe:0,step:1,tooltipVisible:!1})),u.a.createElement(y["a"],{span:4},u.a.createElement(v["a"],{min:2,max:50,style:{margin:"0 16px"},step:1,value:Oe,onChange:ht}))),u.a.createElement("dl",null,u.a.createElement("dt",null,Object(N["formatMessage"])({id:"train.testUnionPercentage"}))),u.a.createElement(E["a"],null,u.a.createElement(y["a"],{span:12},u.a.createElement(O["a"],{min:10,max:80,onChange:gt,value:"number"===typeof Me?Me:0,step:1,tooltipVisible:!1})),u.a.createElement(y["a"],{span:4},u.a.createElement(v["a"],{min:10,max:80,style:{margin:"0 16px"},step:1,value:Me,formatter:e=>"".concat(e,"%"),onChange:gt}))),u.a.createElement(E["a"],null,u.a.createElement(y["a"],{span:18},u.a.createElement("div",{className:L.a.barWrapper},u.a.createElement("div",{className:L.a.cvdata,style:{width:"".concat(100-Me,"%"),overflow:"hidden"}},Array.apply(null,{length:Oe}).map((e,t)=>{return u.a.createElement("span",{style:{flex:1,backgroundColor:"#0090DC",borderRight:"1px solid #fff"}})})),u.a.createElement("div",{className:L.a.testdata,style:{flex:1,width:"".concat(Me,"%"),backgroundColor:"#E73B40"}})),u.a.createElement("div",{className:L.a.legend},u.a.createElement("div",{className:L.a.number},u.a.createElement("span",{className:L.a.cvdataCir}),u.a.createElement("span",{className:L.a.symbol},Object(N["formatMessage"])({id:"train.cvdata"}))),u.a.createElement("div",{className:L.a.type},u.a.createElement("span",{className:L.a.testCir}),u.a.createElement("span",{className:L.a.symbol},Object(N["formatMessage"])({id:"train.testUnion"}))))))):b===F["PartitionStrategy"].Manual?u.a.createElement(k["a"],{placeholder:_t(),style:{width:300},disabled:!st,onChange:bt,value:Re},ot.map((e,t)=>{return u.a.createElement(z,{value:e.name,key:t},e.name)})):u.a.createElement("div",null,u.a.createElement("dl",null,u.a.createElement("dt",null,Object(N["formatMessage"])({id:"train.random_split.seed"}))),u.a.createElement(E["a"],null,u.a.createElement(v["a"],{onChange:e=>we(e),min:0,max:65535,value:Te,style:{width:300}})),u.a.createElement("dl",null,u.a.createElement("dt",null,Object(N["formatMessage"])({id:"train.random_split.proportion"}))),u.a.createElement(E["a"],{style:{width:"90%"}},u.a.createElement(T["b"],{dataRef:m,sliderData:Ze})))},yt=e=>{He(!1),me(e)},Ot=()=>{var e={label_col:le,pos_label:ce,train_mode:ge,experiment_engine:"HyperGBM",datetime_series_col:De};if(e["partition_strategy"]=b,b===F["PartitionStrategy"].CrossValidation)e["cross_validation"]={n_folds:Me};else if(b===F["PartitionStrategy"].TrainValidationHoldout){var t=m.current.getData();e["train_validation_holdout"]={train_percentage:t[0].count,validation_percentage:t[1].count,holdout_percentage:t[2].count,random_state:Te}}else{if(b!==F["PartitionStrategy"].Manual)return void Object(I["a"])("Unseen partition strategy: "+b);e["partition_col"]=Re}var r={datasetName:n,param:e};r["param"].hasOwnProperty("label_col")&&void 0===r["param"]["label_col"]?Ve(!0):r["param"].hasOwnProperty("pos_label")&&""===r["param"]["pos_label"]?He(!0):a({type:"train/train",payload:r})},jt=()=>{return ct?Object(N["formatMessage"])({id:"train.datetimeColSelectorNoItem"}):Object(N["formatMessage"])({id:"train.select"})},_t=()=>{return st?Object(N["formatMessage"])({id:"train.partition.noPartitionCols"}):Object(N["formatMessage"])({id:"train.select"})},xt={multi_classification:"train.taskMultiClassification",binary_classification:"train.taskBinaryClassification",regression:"train.taskRegression"},Mt=xt[pe],St=e=>{return u.a.createElement("span",{style:{color:"#c4c4c4",marginLeft:2}},e)};return u.a.createElement(o["a"],{form:ut,style:{backgroundColor:"#FAFAFA",maxWidth:"900px"}},u.a.createElement("dl",{style:{marginLeft:"30px",paddingTop:"20px"}},u.a.createElement("dt",{style:{color:"#113D95",fontSize:"18px"}},u.a.createElement("span",null,Object(N["formatMessage"])({id:"train.tagCol"})))),u.a.createElement("div",{style:{marginLeft:"30px",paddingTop:"0px"}},St(Object(N["formatMessage"])({id:"train.hintTarget"}))),u.a.createElement("dl",null,u.a.createElement("dd",null,u.a.createElement("span",{style:{marginLeft:"30px",paddingTop:"10px"}},u.a.createElement(k["a"],{value:le,placeholder:Object(N["formatMessage"])({id:"train.select"}),style:{width:300,marginBottom:20},onChange:ft},lt&&lt.map(e=>{return u.a.createElement(z,{value:e.name},e.name)}))),u.a.createElement(l["a"],{type:"primary",style:{marginLeft:10},onClick:Ot},Object(N["formatMessage"])({id:"train.train"}))),qe?u.a.createElement("div",{className:L.a.labelTip,style:{marginTop:-20}},Object(N["formatMessage"])({id:"train.labelNotEmpty"})):null),u.a.createElement("dl",{style:{marginLeft:"30px",paddingTop:"0px"}},0!==pe.length&&u.a.createElement(u.a.Fragment,null,u.a.createElement("dt",{style:{color:"#113D95",fontSize:"18px"}},Object(N["formatMessage"])({id:"train.taskType"}),Object(P["f"])("train.hintTaskType")),u.a.createElement("dd",null,u.a.createElement("span",{style:{color:"#c4c4c4",marginLeft:2}},"  ",Object(N["formatMessage"])({id:"train.hintInferTaskType"},{taskType:Object(N["formatMessage"])({id:Mt})}),"   ")))),u.a.createElement("dl",{style:{marginLeft:"30px",paddingTop:"10px"}},u.a.createElement(w["a"],{labelType:J,labelData:C,style:{width:350}})),"binary_classification"===pe&&u.a.createElement("dl",{className:L.a.binary,style:{marginLeft:"30px",paddingTop:"10px"}},u.a.createElement("dt",{style:{color:"#113D95",fontSize:"18px"}},Object(N["formatMessage"])({id:"train.normalSampleModal"}),Object(P["f"])("train.hintPositiveLabel")),u.a.createElement("dd",null,u.a.createElement(k["a"],{value:ce,placeholder:Object(N["formatMessage"])({id:"train.select"}),style:{width:300},onChange:yt},K&&K.map((e,t)=>{return u.a.createElement(z,{value:e.type,key:t},e.type)}))),We?u.a.createElement("div",{className:L.a.labelTip},Object(N["formatMessage"])({id:"train.posNotEmpty"})):null),u.a.createElement("div",{className:L.a.container,style:{marginLeft:"30px",paddingTop:"10px"}},u.a.createElement("div",{className:L.a.modeWrapper},u.a.createElement("dl",{className:L.a.mode},u.a.createElement("dt",{style:{color:"#113D95",fontSize:"18px"}},Object(N["formatMessage"])({id:"train.experimentEngine"}),Object(P["f"])("train.hintExperimentEngine")),u.a.createElement("dd",null,u.a.createElement(k["a"],{value:Q,placeholder:Object(N["formatMessage"])({id:"train.select"}),style:{width:300},onChange:e=>{var t={KNN:"1",MLP:"2",DTR:"3",RF:"4",LR:"5"};G(e),console.log(t[e]),pt(t[e])}},r.map(e=>{return u.a.createElement(z,{value:e,key:e},e)}))))),u.a.createElement("div",{className:L.a.modeWrapper},u.a.createElement("dl",{className:L.a.mode},u.a.createElement("dt",{style:{color:"#113D95",fontSize:"18px"}},Object(N["formatMessage"])({id:"train.distributedPolicies"}),Object(P["f"])("train.hintDistributedPolicies")),u.a.createElement("dd",null,u.a.createElement(k["a"],{value:te,placeholder:Object(N["formatMessage"])({id:"train.select"}),style:{width:300},onChange:e=>{ae(e)}},s.map(e=>{return u.a.createElement(z,{value:e,key:e},e)}))))),u.a.createElement("div",{className:L.a.modeWrapper},u.a.createElement("dl",{className:L.a.mode,style:{color:"#113D95",fontSize:"18px"}},u.a.createElement("dt",null,"\u5efa\u6a21\u76ee\u6807",Object(P["f"])("train.hintTrainMode")),u.a.createElement("dd",null,u.a.createElement(j["a"].Group,{onChange:e=>Ee(e.target.value),value:ge},u.a.createElement(j["a"],{value:"quick"},"\u6027\u80fd\u6709\u9650"),u.a.createElement(j["a"],{value:"performance"},"\u901f\u5ea6\u6709\u9650")))))),nt.length>0?nt.map((e,t)=>u.a.createElement("div",{style:{width:"1000px",marginLeft:"30px"}}," ",u.a.createElement(E["a"],{key:t,gutter:16},u.a.createElement(y["a"],{span:12},u.a.createElement(o["a"].Item,{name:"param_".concat(e.id),label:e.param_name,rules:[{required:!1,message:"Please enter ".concat(e.param_name)}]},u.a.createElement("div",{style:{display:"flex",alignItems:"center"}},u.a.createElement(i["a"],{style:{width:"100%"},placeholder:"Please enter ".concat(e.param_name)}),u.a.createElement("div",{className:L.a["item-hints"],style:{position:"relative"}},u.a.createElement("div",{className:L.a.hint,"data-position":"4"},u.a.createElement("span",{className:L.a["hint-radius"]}),u.a.createElement("span",{className:L.a["hint-dot"]},"Tip"),u.a.createElement("div",{className:"".concat(L.a["hint-content"]," ").concat(L.a["do--split-children"])},u.a.createElement("p",null,e.param_notice)))))))))):null,u.a.createElement("dl",{style:{marginLeft:"30px",paddingTop:"10px"}},u.a.createElement("dt",{style:{color:"#113D95",fontSize:"18px"}},Object(N["formatMessage"])({id:"train.dataAllot"}),Object(P["f"])("train.partition.hint"))),u.a.createElement(g["a"],{title:Et,style:{width:"80%",marginLeft:"30px",paddingTop:"10px"}},u.a.createElement("div",null,vt())),u.a.createElement("dl",{style:{marginLeft:"30px",paddingTop:"10px"}},u.a.createElement("dt",{style:{color:"#113D95",fontSize:"18px"}},Object(N["formatMessage"])({id:"train.datetimeCol"}),Object(P["f"])("train.hintDatetimeSeriesFeature")),u.a.createElement("dd",null,u.a.createElement(k["a"],{placeholder:jt(),style:{width:300},disabled:!ct,onChange:Pe},it.map((e,t)=>{return u.a.createElement(z,{value:e.name,key:t},e.name)})))))},V=Object(f["o"])(Object(p["c"])(e=>{var t=e.dataset,a=e.train;return{dataset:t,train:a}})(q)),K=(a("g9YV"),a("wCAj")),B=(a("qVdP"),a("jsC+")),W=(a("5Dmo"),a("3S7+")),H=(a("T2oS"),a("W9HT")),J=(a("Znn+"),a("ZTPi")),Y=a("ye1Q"),Z=a("bRQS"),X=a("4i/N"),Q=(a("Mwp2"),a("VXEj")),G=a("EK1h"),$=a.n(G),ee=a("p0pE"),te=a.n(ee),ae=(a("R9oj"),a("ECub")),ne=a("Y/ft"),re=a.n(ne),le=a("MT78"),ie=a.n(le),oe=(a("XOKv"),a("17x9"),a("iLNv")),se=a("zHMj"),ce=a("bYtY"),me=(e,t)=>{var a={};return t.forEach(t=>{a[t]=e[t]}),a};class de extends d["Component"]{constructor(e){super(e),this.getEchartsInstance=(()=>this.echartsLib.getInstanceByDom(this.echartsElement)||this.echartsLib.init(this.echartsElement,this.props.theme,this.props.opts)),this.renderEchartDom=(()=>{var e=this.getEchartsInstance();return e.setOption(this.props.option,this.props.notMerge||!1,this.props.lazyUpdate||!1),window.addEventListener("resize",()=>{e&&e.resize()}),this.props.showLoading?e.showLoading(this.props.loadingOption||null):e.hideLoading(),e}),this.dispose=(()=>{if(this.echartsElement){try{Object(oe["clear"])(this.echartsElement)}catch(e){console.warn(e)}this.echartsLib.dispose(this.echartsElement)}}),this.rerender=(()=>{var e=this.props,t=e.onEvents,a=e.onChartReady,n=this.renderEchartDom();this.bindEvents(n,t||{}),"function"===typeof a&&this.props.onChartReady(n),this.echartsElement&&Object(ce["bind"])(this.echartsElement,()=>{try{n&&n.resize()}catch(e){console.warn(e)}})}),this.bindEvents=((e,t)=>{var a=(t,a)=>{"string"===typeof t&&"function"===typeof a&&e.on(t,t=>{a(t,e)})};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a(n,t[n])}),this.echartsLib=ie.a,this.echartsElement=null}componentDidMount(){this.renderEchartDom()}componentDidUpdate(e){if(!Object(se["a"])(e.theme,this.props.theme)||!Object(se["a"])(e.opts,this.props.opts)||!Object(se["a"])(e.onEvents,this.props.onEvents))return this.dispose(),void this.rerender();var t=["option","notMerge","lazyUpdate","showLoading","loadingOption"];if(Object(se["a"])(me(this.props,t),me(e,t))&&("function"!==typeof this.props.shouldSetOption||this.props.shouldSetOption(e,this.props))){var a=this.renderEchartDom();if(!Object(se["a"])(e.style,this.props.style)||!Object(se["a"])(e.className,this.props.className))try{a&&a.resize()}catch(e){console.warn(e)}}}componentWillUnmount(){this.dispose()}render(){var e=this.props,t=e.style,a=e.className,n=te()({height:300},t);return u.a.createElement("div",{ref:e=>{this.echartsElement=e},style:n,className:a})}}de.defaultProps={style:{},className:"",notMerge:!1,lazyUpdate:!1,showLoading:!1,loadingOption:null,theme:null,onChartReady:()=>{},onEvents:{},opts:{},shouldSetOption:()=>!0};var ue=de;function pe(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=fe(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw l}}}}function fe(e,t){if(e){if("string"===typeof e)return be(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?be(e,t):void 0}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}class he extends d["PureComponent"]{constructor(){super(...arguments),this.getOption=((e,t)=>{return{parallelAxis:[],series:[{type:"parallel",lineStyle:{width:2},data:[]}],visualMap:{min:e,max:t,left:0,precision:4,calculable:!0,orient:"vertical",bottom:"15%",hoverLink:!0}}})}render(){var e=this.props,t=(e.style,e.className,e.data);e.xAxisProp,e.seriesData,e.loading,re()(e,["style","className","data","xAxisProp","seriesData","loading"]);if(!t||!t.hasOwnProperty("data"))return u.a.createElement(ae["a"],null);var a,n=[],r=pe(t.data);try{for(r.s();!(a=r.n()).done;){var l=a.value;n.push(l.reward)}}catch(e){r.e(e)}finally{r.f()}var i=this.getOption(Math.min(...n),Math.max(...n));return t.param_names.forEach((e,t)=>{i.parallelAxis.push({dim:t,name:e})}),t.data.forEach((e,a)=>{i["series"]["data"]=new Array(t.param_names.length),i["series"][0]["data"][a]=e.params}),u.a.createElement(ue,{option:te()({},i)})}}var ge,Ee=he,ve=e=>{var t=e.modelName,a=e.location.query.datasetName,n=Object(d["useState"])({}),r=c()(n,2),l=r[0],i=r[1],o=Object(d["useState"])(!0),s=c()(o,2),m=s[0],p=s[1];return Object(d["useEffect"])(()=>{var e={datasetName:a,modelName:t};Object(D["i"])(e).then(e=>{var t=e.data;if(t.trials){p(!1);var a=t.trials;a.param_names.push("Reward metric"),a.data.forEach(e=>{e.params.push(e.reward)}),i(a)}})},[a,t]),u.a.createElement("div",null,m?u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(N["formatMessage"])({id:"center.training"})):u.a.createElement(Ee,{data:l}))},ye=(Object(f["o"])(ve),[{value:"explained_variance",name:"EVS"},{value:"neg_mean_absolute_error",name:"MAE"},{value:"neg_mean_squared_error",name:"MSE"},{value:"neg_mean_squared_log_error",name:"MSLE"},{value:"neg_median_absolute_error",name:"MedianAE"},{value:"r2",name:"R2"},{value:"accuracy",name:"Accuracy"},{value:"f1",name:"F1"},{value:"precision",name:"Precision"},{value:"recall",name:"Recall"},{value:"roc_auc",name:"AUC"},{value:"fbeta",name:"FBeta"},{value:"log_loss",name:"Log Loss"},{value:"rmse",name:"RMSE"},{value:"mse",name:"MSE"},{value:"mae",name:"MAE"},{value:"evs",name:"EVS"},{value:"msle",name:"MSLE"}]),Oe=e=>{var t=e.modelName,a=e.location.query.datasetName,n=e.key,r=Object(d["useState"])({}),l=c()(r,2),i=l[0],o=l[1],s=Object(d["useState"])({}),m=c()(s,2),p=m[0],f=m[1],b=Object(d["useState"])({}),h=c()(b,2),g=h[0],v=h[1],O=Object(d["useState"])(""),j=c()(O,2),_=j[0],x=j[1],M=Object(d["useState"])(!0),S=c()(M,2),k=S[0],w=S[1];Object(d["useEffect"])(()=>{var e={datasetName:a,modelName:t};Object(D["i"])(e).then(e=>{var t=e.data;console.log("cx3",t.performance),t.performance&&(w(!1),o(t.performance.confusion_matrix),f(t.performance.metrics),v(t.performance.roc_curve),x(t.task_type))})},[a,t]);var C=[];if(g){var L=g.false_positive_rate,I=void 0===L?[]:L,F=g.true_positive_rate,R=void 0===F?[]:F,A=g.thresholds,z=void 0===A?[]:A;I.forEach(e=>{C.push({x:e})}),R.forEach((e,t)=>{C[t]["y"]=e}),z.forEach((e,t)=>{C[t]["z"]=e,C[t]["name"]="True positive rate"})}var U=[];Object.keys(p).forEach(e=>{U.push({name:e.toLowerCase(),score:p[e]})}),console.log("cx2",U);var q=e=>{var t=ye.filter(t=>t.value===e);return console.log("cx",t),t.length>0?t[0].name:e},V=e=>{if(i){var t=i.label,a=void 0===t?{}:t;return u.a.createElement("div",{style:{textAlign:"center"}},u.a.createElement("span",null,"yes"===e?a.true:a.false))}},B=e=>{if(i){var t=i.label,a=void 0===t?{}:t;return u.a.createElement("span",null,"yes"===e?a.true:a.false)}},W=(e,t)=>{return"success"===e?u.a.createElement("span",{style:{color:"#13c2c2"}},t):u.a.createElement("span",{style:{color:"#f5222d"}},t)},H={precision:"Precision",recall:"Recall",f1:"F1",accuracy:"Accuracy"},J=e=>{return["accuracy","f1","recall","precision","roc_auc","r2"].map((t,a)=>({y:H[t],x:e[t]?e[t]:0}))},Y=J(p),Z=[{title:"",children:[{title:Object(N["formatMessage"])({id:"center.actual"}),dataIndex:"actual",key:"actual",align:"center"}]},{title:Object(N["formatMessage"])({id:"center.evaluate.predict"}),children:[{title:V("yes"),dataIndex:"predicted_yes",align:"center"},{title:V("no"),dataIndex:"predicted_no",align:"center"},{title:"Total",dataIndex:"total",align:"center"}]}],X=[];return i&&(X=[{id:"index",actual:B("yes"),predicted_yes:W("success",i.tp),predicted_no:W("failed",i.fn),total:i.tp+i.fn},{id:"index1",actual:B("no"),predicted_yes:W("failed",i.fp),predicted_no:W("success",i.tn),total:i.fp+i.tn},{id:"index2",actual:"Total",predicted_yes:i.tp+i.fp,predicted_no:i.fn+i.tn,total:i.tp+i.fn+i.fp+i.tn}]),u.a.createElement(u.a.Fragment,null,k?u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(N["formatMessage"])({id:"center.training"})):u.a.createElement(E["a"],{key:n},"binary_classification"===_&&u.a.createElement(y["a"],{span:24},u.a.createElement("h3",null,Object(P["e"])("center.mix","center.hintConfusionMatrix")),u.a.createElement(K["a"],{columns:Z,dataSource:X,size:"small",bordered:!0,pagination:!1,rowKey:e=>e.actual})),u.a.createElement("h3",{style:{marginTop:20}},Object(N["formatMessage"])({id:"center.modalEvaluate"})),"regression"!==_?u.a.createElement(y["a"],{span:24,style:{marginTop:10}},u.a.createElement(T["e"],{data:Y})):null,u.a.createElement(y["a"],{span:24},U.length>0&&u.a.createElement("div",{className:$.a.box},u.a.createElement(Q["b"],{dataSource:U,renderItem:(e,t)=>u.a.createElement(Q["b"].Item,null,u.a.createElement(Q["b"].Item.Meta,{style:{float:"left"},title:q(e.name)}),u.a.createElement("div",{style:{float:"right"}}," ",e.score&&e.score.toFixed(4)))}))),"binary_classification"===_&&u.a.createElement(y["a"],{span:24},u.a.createElement("h3",{style:{marginTop:20}},Object(N["formatMessage"])({id:"center.roc"})),u.a.createElement("div",{style:{width:1e3}},u.a.createElement(T["c"],{data:C,height:500})))))},je=Object(f["o"])(Object(p["c"])(e=>{var t=e.center;return{center:t}})(Oe)),_e=(a("miYZ"),a("tsqr")),xe=(a("FJo9"),a("L41K")),Me=(a("DZo9"),a("8z0m")),Se=a("LtfV"),ke=Me["a"].Dragger,Ne=xe["a"].Step,Te=e=>{Object(I["a"])("Unseen step status "+(null===e||void 0===e?void 0:e.status)+" of "+(null===e||void 0===e?void 0:e.type))},we=e=>{e.indexParam;var t,a=e.modelName,n=e.taskStatus,r=e.location.query.datasetName,l=Object(d["useState"])(null),i=c()(l,2),o=i[0],s=i[1],m=Object(d["useState"])("-"),p=c()(m,2),f=p[0],b=p[1],h=Object(d["useState"])("-"),g=c()(h,2),v=g[0],O=g[1],j=Object(d["useState"])("-"),_=c()(j,2),x=_[0],M=_[1],S=Object(d["useState"])("-"),k=c()(S,2),T=k[0],w=k[1],C=Object(d["useState"])("-"),L=c()(C,2),R=L[0],A=L[1],z=Object(d["useState"])(""),U=c()(z,2),q=U[0],V=U[1],K=Object(d["useState"])(-1),B=c()(K,2),W=B[0],H=B[1],J=()=>{null!==t&&(clearInterval(t),t=null)},Y=(e,t,a)=>{Object(D["j"])(e,t,a).then(e=>{if(null!==e&&void 0!==e)if(0===e.code){var t=e.data.steps;if(null!==t&&void 0!==t){var a=Object(P["d"])(t),n=a[F["PredictStepType"].Upload];null!==n&&void 0!==n&&(H(0),n.status===F["StepStatus"].Succeed?b(Object(N["formatMessage"])({id:"center.batchPredict.processTip.upload"},{fileSize:Object(P["b"])(n.extension.file_size),took:n.took.toFixed(2)})):n.status===F["StepStatus"].Failed?X(b):Te(n));var r=a[F["PredictStepType"].Load];null!==r&&void 0!==r&&(H(1),r.status===F["StepStatus"].Succeed?O(Object(N["formatMessage"])({id:"center.batchPredict.processTip.loadData"},{nRows:r.extension.n_rows,nCols:r.extension.n_cols,took:r.took.toFixed(2)})):r.status===F["StepStatus"].Failed?X(O):Te(n));var l=a[F["PredictStepType"].LoadModel];null!==l&&void 0!==l&&(H(2),l.status===F["StepStatus"].Succeed?M(Object(N["formatMessage"])({id:"center.batchPredict.processTip.loadModel"},{modelSize:Object(P["b"])(l.extension.model_size),took:l.took.toFixed(2)})):l.status===F["StepStatus"].Failed?X(M):Te(l));var i=a[F["PredictStepType"].Evaluate];null!==i&&void 0!==i&&(H(3),i.status===F["StepStatus"].Succeed?w(Object(N["formatMessage"])({id:"center.batchPredict.processTip.evaluate"},{took:i.took.toFixed(2)})):i.status===F["StepStatus"].Failed?X(w):Te(i));var o=a[F["PredictStepType"].WriteResult];null!==o&&void 0!==o&&(J(),H(4),o.status===F["StepStatus"].Succeed?(A(u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,u.a.createElement("a",{download:!0,href:"/api/resource/".concat(o.extension.output_path,"?opt=download")},Object(N["formatMessage"])({id:"center.batchPredict.processTip.writeResult"}))))),V("finish")):o.status===F["StepStatus"].Failed?X(A):Te(o))}else Object(I["a"])("Response steps from server of prediction is null yet code is 0 "),J()}else J();else Object(I["a"])("Response from server of prediction is null"),J()})},Z=(e,a,n,r)=>{console.error("\u5f00\u542f\u5b9a\u65f6\u5668: 11111"),console.error("2\u5f00\u542f\u5b9a\u65f6\u5668: "+t);var l={file_path:n,upload_took:r};Object(D["a"])(e,a,l).then(n=>{var r=n.data;Y(e,a,r.batch_predict_job_name),null!==t&&J(),t=setInterval(()=>{console.error("1\u5f00\u542f\u5b9a\u65f6\u5668: "+t),Y(e,a,r.batch_predict_job_name)},1e3),console.error("\u5f00\u542f\u5b9a\u65f6\u5668: "+t)})},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Failed";e(t),V("error"),J()},Q={name:"file",multiple:!1,accept:".csv, .tsv",headers:{"File-Name":o},action:"/api/resource",beforeUpload:e=>{if(e.size>128e6)return _e["b"].warning(Object(N["formatMessage"])({id:"center.big"})),!1;s(e.name)},showUploadList:!1,onChange(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(H(0),Z(r,a,e.file.response.data.path,e.file.response.data.took)):"error"===t&&(_e["b"].error("".concat(e.file.name," ").concat(Object(N["formatMessage"])({id:"center.failUpload"}))),V("error"))}},G=u.a.createElement(E["a"],null,u.a.createElement(y["a"],{span:24},u.a.createElement(ke,Q,u.a.createElement("p",{className:"ant-upload-drag-icon"},u.a.createElement(Se["a"],null)),u.a.createElement("p",{className:"ant-upload-text"},Object(N["formatMessage"])({id:"center.uploadBox"})),u.a.createElement("p",{className:"ant-upload-hint"},Object(N["formatMessage"])({id:"center.uploadtips"})))),u.a.createElement(y["a"],{span:24,style:{marginTop:24}},u.a.createElement(xe["a"],{current:W,status:q},u.a.createElement(Ne,{title:Object(N["formatMessage"])({id:"center.uploadData"}),description:f}),u.a.createElement(Ne,{title:Object(N["formatMessage"])({id:"center.loadData"}),description:v}),u.a.createElement(Ne,{title:Object(N["formatMessage"])({id:"center.read"}),description:x}),u.a.createElement(Ne,{title:Object(N["formatMessage"])({id:"center.predictData"}),description:T}),u.a.createElement(Ne,{title:Object(N["formatMessage"])({id:"center.result"}),description:R})))),$=u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(N["formatMessage"])({id:"center.training"}));return"running"===n?$:G},Ce=Object(f["o"])(Object(p["c"])(e=>{var t=e.center;return{center:t}})(we)),Le=J["a"].TabPane,De=u.a.createElement(Y["a"],{style:{fontSize:16},spin:!0});class Pe extends u.a.Component{constructor(e){super(e),this.batchPredictStepType={upload:"upload",load:"load",load_model:"load_model"},this.metricDisplayMapping={auc:"AUC",accuracy:"Accuracy",rmse:"RMSE"},this.formatTrainMode={[F["TrainMode"].Quick]:Object(N["formatMessage"])({id:"train.quick"}),[F["TrainMode"].Performance]:Object(N["formatMessage"])({id:"train.performance"}),[F["TrainMode"].Minimal]:Object(N["formatMessage"])({id:"train.minimal"})},this.viewLog=(e=>{window.open("/api/resource/".concat(e,"?opt=head&n=1000"))}),this.viewSourceCode=(e=>{window.open("/api/resource/".concat(e,"?opt=head&n=-1"))}),this.viewNotebook=(e=>{window.open("".concat(this.state.notebookPortal,"/notebooks/").concat(e))}),this.localTrainMode=(e=>{return"minimal"===e?Object(N["formatMessage"])({id:"train.minimal"}):"quick"===e?Object(N["formatMessage"])({id:"train.quick"}):"performance"===e?Object(N["formatMessage"])({id:"train.performance"}):void 0}),this.getOptionMenu=(e=>{return u.a.createElement(r["a"],null,u.a.createElement(r["a"].Item,null,u.a.createElement("span",{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>{this.viewLog(e.log_file_path)}},Object(N["formatMessage"])({id:"center.log"}))),u.a.createElement(r["a"].Item,null,u.a.createElement("span",{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>{this.viewSourceCode(e.train_source_code_path)}},Object(N["formatMessage"])({id:"center.source"}))),u.a.createElement(r["a"].Item,null,u.a.createElement("span",{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>{this.viewNotebook(e.train_notebook_uri)}},Object(N["formatMessage"])({id:"center.titleNotebook"}))))}),this.columns=[{title:"",dataIndex:"status",key:"status",render:(e,t)=>{return"running"===t.status?u.a.createElement(H["a"],{indicator:De}):"succeed"===t.status?u.a.createElement(Z["a"],{style:{fontSize:16,color:"green"}}):"failed"===t.status?u.a.createElement(X["a"],{style:{fontSize:16,color:"red"}}):void 0}},{title:Object(N["formatMessage"])({id:"center.modal"}),dataIndex:"no_experiment",key:"no_experiment"},{title:Object(N["formatMessage"])({id:"train.trainMode"}),dataIndex:"train_mode",key:"train_mode",render:e=>{return this.formatTrainMode[e]}},{title:u.a.createElement(u.a.Fragment,null,Object(N["formatMessage"])({id:"center.target"}),Object(P["f"])("center.hintOptimizeMetric")," "),dataIndex:"score",key:"score",render:(e,t,a)=>{var n=t.score;return n?u.a.createElement(W["a"],{placement:"right",color:"white",title:Object(N["formatMessage"])({id:"center.hintTargetCol"},{targetCol:t.target_col})},u.a.createElement("span",null,n.toFixed(6),"(",this.metricDisplayMapping[t.metric_name],")")):u.a.createElement("span",null,"-")}},{title:Object(P["e"])("center.remain","center.hintRemainingTime"),dataIndex:"estimated_remaining_time",key:"estimated_remaining_time",render:e=>{if(0===e)return u.a.createElement("span",null,Object(N["formatMessage"])({id:"center.finished"}));if(e){var t=e>3600?{color:"red"}:{};return u.a.createElement("span",{style:t},Object(P["c"])(e))}return u.a.createElement("span",null,"-")}},{title:Object(P["e"])("center.spend","center.hintElapsed"),dataIndex:"escaped",key:"escaped",render:e=>{var t=e>3600?{color:"red"}:{};return u.a.createElement("span",{style:t},Object(P["c"])(e))}},{title:Object(P["e"])("center.size","center.hintModelSize"),dataIndex:"model_file_size",key:"model_file_size",render:e=>{return e?u.a.createElement("span",null,Object(P["b"])(e)):u.a.createElement("span",null,"-")}},{title:Object(P["e"])("center.titleResource","center.hintResource"),dataIndex:"train_notebook_uri",align:"center",key:"train_notebook_uri",render:(e,t,a)=>{return u.a.createElement(B["a"],{overlay:this.getOptionMenu(t),placement:"bottomCenter"},u.a.createElement("a",null,"..."))}}],this.loadMoreContent=(()=>u.a.createElement("div",{style:{textAlign:"center",paddingTop:40,paddingBottom:40,border:"1px solid #e8e8e8"}},u.a.createElement(H["a"],{tip:"Loading..."}))),this.state={listData:[],notebookPortal:""},this.datasetName=this.props.location.query.datasetName}handleFetchList(){var e=this.datasetName;Object(D["o"])(e).then(e=>{var t=e.data;this.setState({listData:t.experiments.map(e=>{return e.key=e.no_experiment,e}),notebookPortal:t.notebook_portal});var a=t.experiments.map(e=>e.status);a.includes("running")||(clearInterval(ge),ge=null)})}componentDidMount(){null!==ge&&void 0!==ge&&clearInterval(ge),this.handleFetchList(),ge=setInterval(this.handleFetchList.bind(this),F["REFRESH_EXPERIMENT_LIST_TIMEOUT"])}componentWillUnmount(){null!=this.timer&&clearInterval(this.timer)}render(){return u.a.createElement("div",null,u.a.createElement(K["a"],{dataSource:this.state.listData,columns:this.columns,pagination:!1,expandable:{expandedRowRender:e=>{return"succeed"===e.status||"running"===e.status?u.a.createElement(J["a"],{onChange:e=>console.log(e),type:"card"},u.a.createElement(Le,{tab:Object(N["formatMessage"])({id:"center.evaluate"}),key:"1"},u.a.createElement(je,{modelName:e.name,key:e.key})),u.a.createElement(Le,{tab:Object(N["formatMessage"])({id:"center.predict"}),key:"2"},u.a.createElement(Ce,{modelName:e.name,taskStatus:e.status}))):"failed"===e.status?u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(N["formatMessage"])({id:"center.fail"}),u.a.createElement("a",{onClick:()=>{this.viewLog(e.log_file_path)},target:"_blank"},Object(N["formatMessage"])({id:"center.bug"}))):void 0}}}))}}var Ie=Object(f["o"])(Object(p["c"])(e=>{var t=e.train;return{train:t}})(Pe)),Fe=a("mAF4"),Re=a("UdsK"),Ae=a("aoZx"),ze=a("RVw9"),Ue=(m["a"].Header,m["a"].Sider,m["a"].Content),qe=(m["a"].Footer,e=>{var t=e.dispatch,a=e.location.query.datasetName,s=e.train.defaultTab,p=Object(d["useState"])(!1),f=c()(p,2),g=(f[0],f[1],Object(d["useState"])("b")),E=c()(g,2),v=E[0],y=E[1],O=e=>{y(e)},j={a:u.a.createElement(b["default"],{datasetName:a}),b:u.a.createElement(h["default"],{datasetNameFromParam:a,isTemporary:!1}),c:u.a.createElement(V,null),d:u.a.createElement(Ie,null)},_=o["a"].useForm(),x=c()(_,1);x[0];Object(d["useEffect"])(()=>{var e=localStorage.getItem("tab")||s;t({type:"train/save",payload:{defaultTab:e}})},[]);u.a.Fragment,o["a"].Item,i["a"],l["a"],r["a"].SubMenu;return u.a.createElement(m["a"],null,u.a.createElement("div",{className:"logo"}),u.a.createElement(r["a"],{mode:"horizontal",selectedKeys:[v],onClick:e=>{var t=e.key;return O(t)},style:{backgroundColor:"#EFF4F8"}},u.a.createElement(r["a"].Item,{key:"a",icon:u.a.createElement(Fe["a"],null),label:"nav 1"},Object(N["formatMessage"])({id:"extra.preview"})),u.a.createElement(r["a"].Item,{key:"b",icon:u.a.createElement(Re["a"],null),label:"nav 2"},Object(N["formatMessage"])({id:"extra.dataExplore"})),u.a.createElement(r["a"].Item,{key:"c",icon:u.a.createElement(Ae["a"],null),label:"nav 3"},Object(N["formatMessage"])({id:"extra.train"})),u.a.createElement(r["a"].Item,{key:"d",icon:u.a.createElement(ze["a"],null),label:"nav 4"},Object(N["formatMessage"])({id:"extra.center"}))),u.a.createElement("div",{className:L.a.breadcrumb,style:{marginTop:"10px",marginLeft:"20px"}},u.a.createElement(n["a"],null,u.a.createElement(n["a"].Item,null,u.a.createElement("a",{href:"/"},Object(N["formatMessage"])({id:"extra.dataset"}))),u.a.createElement(n["a"].Item,null,Object(N["formatMessage"])({id:"extra.explore"})),u.a.createElement(n["a"].Item,null,a))),u.a.createElement(m["a"],{className:"site-layout"},u.a.createElement(Ue,{className:"site-layout-background",style:{marginTop:"30px",marginLeft:"50px",minHeight:980}},j[v])))});t["default"]=Object(f["o"])(Object(p["c"])(e=>{var t=e.dataset,a=e.train;return{dataset:t,train:a}})(qe))}}]);